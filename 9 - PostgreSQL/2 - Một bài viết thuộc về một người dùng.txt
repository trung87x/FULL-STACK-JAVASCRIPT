# Ng·ªØ c·∫£nh 2: M·ªôt b√†i vi·∫øt thu·ªôc v·ªÅ m·ªôt ng∆∞·ªùi d√πng (user-post)

üß† Model (√ù nghƒ©a d·ªØ li·ªáu & quan h·ªá)
- M·ªói b√†i vi·∫øt (post) ƒë∆∞·ª£c t·∫°o b·ªüi m·ªôt ng∆∞·ªùi d√πng (user).
- Quan h·ªá gi·ªØa b·∫£ng users v√† posts l√† **1-nhi·ªÅu**:
  - 1 user c√≥ th·ªÉ c√≥ nhi·ªÅu post.
  - M·ªói post ch·ªâ thu·ªôc v·ªÅ 1 user.
- C·∫ßn t·∫°o b·∫£ng `posts` c√≥ kh√≥a ngo·∫°i `user_id` tham chi·∫øu ƒë·∫øn b·∫£ng `users`.

üõ†Ô∏è Controller (SQL)

-- B·∫£ng ng∆∞·ªùi d√πng (n·∫øu ch∆∞a c√≥)
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL
);

-- B·∫£ng b√†i vi·∫øt c√≥ quan h·ªá ƒë·∫øn ng∆∞·ªùi d√πng
CREATE TABLE posts (
  id SERIAL PRIMARY KEY,
  title TEXT NOT NULL,
  content TEXT,
  user_id INTEGER NOT NULL REFERENCES users(id),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Th√™m ng∆∞·ªùi d√πng
INSERT INTO users (name, email) VALUES ('Trung ƒêinh', 'trung@example.com');

-- Th√™m b√†i vi·∫øt g·∫Øn v·ªõi user_id = 1
INSERT INTO posts (title, content, user_id)
VALUES ('Gi·ªõi thi·ªáu PostgreSQL', 'B√†i vi·∫øt n√†y n√≥i v·ªÅ PostgreSQL...', 1);

-- Truy v·∫•n b√†i vi·∫øt k√®m t√™n t√°c gi·∫£
SELECT posts.id, posts.title, users.name AS author
FROM posts
JOIN users ON posts.user_id = users.id;

üìò Ghi ch√∫:
- `user_id INTEGER REFERENCES users(id)`: kh√≥a ngo·∫°i li√™n k·∫øt ƒë·∫øn b·∫£ng `users`
- `JOIN`: d√πng ƒë·ªÉ truy v·∫•n d·ªØ li·ªáu t·ª´ nhi·ªÅu b·∫£ng li√™n quan
- `NOT NULL`: ƒë·∫£m b·∫£o m·ªói b√†i vi·∫øt ph·∫£i c√≥ ng∆∞·ªùi t·∫°o

