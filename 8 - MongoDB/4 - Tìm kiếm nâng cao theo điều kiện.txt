üì¶ Ng·ªØ c·∫£nh #4: T√¨m ki·∫øm n√¢ng cao theo ƒëi·ªÅu ki·ªán (MongoDB + Mongoose)

üß† Model (√ù nghƒ©a)
- Kh√¥ng ch·ªâ l·∫•y to√†n b·ªô d·ªØ li·ªáu, ta th∆∞·ªùng c·∫ßn l·ªçc theo ƒëi·ªÅu ki·ªán nh∆∞:
  - T√¨m user theo email
  - L·ªçc s·∫£n ph·∫©m theo gi√°, lo·∫°i, tr·∫°ng th√°i
  - T√¨m b√†i vi·∫øt c√≥ ti√™u ƒë·ªÅ ch·ª©a t·ª´ kh√≥a
- ƒê√¢y l√† t√≠nh nƒÉng quan tr·ªçng cho admin panel, search, dashboard...

üõ†Ô∏è Controller (C√¥ng c·ª• / C√¢u l·ªánh)
- `Model.find({ field: value })`
- `Model.findOne({ field })`
- D√πng c√°c to√°n t·ª≠ MongoDB: `$gt`, `$lt`, `$in`, `$regex`, `$or`, `$and`...
- C√≥ th·ªÉ k·∫øt h·ª£p `.select()`, `.sort()`, `.limit()`, `.skip()` ƒë·ªÉ ph√¢n trang

üß™ Example (routes/productRoute.js)
const express = require('express');
const Product = require('../models/Product');
const router = express.Router();

// GET /products?minPrice=100&maxPrice=1000&category=electronics&keyword=phone
router.get('/products', async (req, res) => {
  try {
    const { minPrice, maxPrice, category, keyword } = req.query;

    const query = {};

    if (minPrice || maxPrice) {
      query.price = {};
      if (minPrice) query.price.$gte = parseInt(minPrice);
      if (maxPrice) query.price.$lte = parseInt(maxPrice);
    }

    if (category) {
      query.category = category;
    }

    if (keyword) {
      query.name = { $regex: keyword, $options: 'i' }; // t√¨m g·∫ßn ƒë√∫ng, kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng
    }

    const products = await Product.find(query).sort({ createdAt: -1 });

    res.json(products);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

module.exports = router;

üìù Ghi ch√∫:
- `$gte`, `$lte` d√πng ƒë·ªÉ l·ªçc theo kho·∫£ng gi√° tr·ªã
- `$regex` d√πng cho t√¨m ki·∫øm g·∫ßn ƒë√∫ng (search bar)
- `.sort({ createdAt: -1 })`: s·∫Øp x·∫øp m·ªõi nh·∫•t tr∆∞·ªõc
- C√≥ th·ªÉ th√™m `.limit()` v√† `.skip()` cho ph√¢n trang (pagination)
